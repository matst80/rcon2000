<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>rcon 2000</title>
	<style>
		:root {
			--color: #26cd71;
			--size: 1rem;
		}

		pre {
			flex: 1;
			font: 'Fira Code', monospace;
			font-size: var(--size);
			word-break: break-all;
			overflow: hidden;
			padding: 3rem;
		}

		input {
			font-size: var(--size);
			background-color: #ffffff20;
			border: 0;
			width: 90%;
			color: #fff;
			padding: 1rem;
		}

		button {
			font-size: var(--size);
			border: 2px solid var(--color);
			background-color: #333;
			width: 100%;
			color: var(--color);
			padding: 1rem;
		}

		html,
		body {
			height: 100vh;
			margin: 0;
			padding: 0;
			overscroll-behavior: none;
		}

		body {
			display: flex;
			flex-direction: column;
			background-color: #000;
			color: #f3f3f3;

		}

		form {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			padding: 1rem;
			align-items: center;
			justify-content: center;
			background-color: #ffffff20;
		}

		@media (min-width: 950px) {
			form {
				flex-direction: row;
			}

			input {
				width: 200px;
				flex: 1;
			}

			button {
				width: auto;
			}
		}
	</style>

</head>

<body>
	<pre id="log" class="p-4 bg-black text-white"></pre>
	<form id="form" class="flex flex-col lg:flex-row">
		<input type="text" id="command" list="commands" placeholder="Slask it here">
		<datalist id="commands">
			<option value="help" />
			<option value="sv_cheats 1" />
			<option value="mp_autoteambalance 0" />
			<option value="mp_limitteams 0" />
			<option value="mp_maxrounds 100" />
			<option value="mp_roundtime_defuse 30" />
			<option value="sv_infinite_ammo 1" />
			<option value="mp_startmoney 1000000" />
			<option value="mp_afterroundmoney 1000000" />
			<option value="game_mode 0" />
			<option value="game_type 0" />
			<option value="mp_friendlyfire false" />
			<option value="sv_banid_enabled false" />
			<option value="bot_quota_mode normal" />
			<option value="bot_Add_ct" />
			<option value="bot_kick" />
			<option value="bot_add_t" />
			<option value="mp_solid_teammates 0" />
			<option value="sv_hegrenade_damage_multiplier 4.0" />
			<option value="sv_hegrenade_radius_multiplier 2.0" />
			<option value="ragdoll_gravity_scale 0.1" />
			<option value="mp_autokick 0" />
		</datalist>
		<button type="submit" id="send">Send</button>
		<button type="button" id="game"
			data-cmd="sv_cheats 1; mp_autoteambalance 0; mp_limitteams 0; mp_maxrounds 100; mp_roundtime_defuse 30; sv_infinite_ammo 1; mp_startmoney 1000000; mp_afterroundmoney 1000000; game_mode 0; game_type 0; mp_friendlyfire false; sv_banid_enabled false;">Normal
			game</button>
		<button type="button" id="bots"
			data-cmd="bot_quota_mode normal; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_kick; bot_add_t; bot_add_t; bot_add_t; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_Add_ct; bot_add_t; bot_add_t; bot_add_t; bot_add_t; bot_add_t; bot_add_t;">Bots!!</button>
		<button type="button" id="awesome"
			data-cmd="mp_solid_teammates 0; sv_hegrenade_damage_multiplier 4.0; sv_hegrenade_radius_multiplier 2.0; ragdoll_gravity_scale 0.1; mp_autokick 0;">Make
			it awesome</button>
	</form>
</body>
<script>
	(function (doc, w) {
		const byId = (id) => doc.getElementById(id)
		const addEvent = (id, fn, evt = 'click') => byId(id).addEventListener(evt, fn)
		addEvent("form", function (e) {
			const cmdElm = byId('command')
			socket.send(cmdElm.value)
			cmdElm.value = ''
			e.preventDefault()
		}, 'submit')

		['game', 'bots', 'awesome'].forEach(id => addEvent(id, () => {
			socket.send(byId(id).dataset.cmd)
		}))

		const socket = new WebSocket(`${location.protocol.replace("http", "ws")}//${location.host}/ws`)
		socket.addEventListener('open', () => {
			console.log('connected')
		})
		socket.onmessage = (event) => {
			byId('log').innerHTML += event.data + '\n'
		}
	})(document, window);
</script>

</html>